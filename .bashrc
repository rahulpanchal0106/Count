#Color definitions

#NORMAL
BLACK='\[\033[0;30m\]'
RED='\[\033[0;31m\]'
YELLOW='\[\033[0;33m\]'
GREEN='\[\033[0;32m\]'
BROWN='\[\033[0;33m\]'
BLUE='\[\033[0;34m\]'
PURPLE='\[\033[0;35m\]'
CYAN='\[\033[0;36m\]'
LIGHT_GRAY='\[\033[0;37m\]'
DARK_GRAY='\[\033[0;90m\]'
LIGHT_RED='\[\033[0;91m\]'
LIGHT_GREEN='\[\033[0;92m\]'
LIGHT_YELLOW='\[\033[0;93m\]'
LIGHT_BLUE='\[\033[0;94m\]'
LIGHT_PURPLE='\[\033[0;95m\]'
LIGHT_CYAN='\[\033[0;96m\]'
WHITE='\[\033[0;97m\]'

#BOLD
BOLD_BLACK='\[\033[1;30m\]'
BOLD_RED='\[\033[1;31m\]'
BOLD_YELLOW='\[\033[1;33m\]'
BOLD_GREEN='\[\033[1;32m\]'
BOLD_BROWN='\[\033[1;33m\]'
BOLD_BLUE='\[\033[1;34m\]'
BOLD_PURPLE='\[\033[1;35m\]'
BOLD_CYAN='\[\033[1;36m\]'
BOLD_LIGHT_GRAY='\[\033[1;37m\]'
BOLD_DARK_GRAY='\[\033[1;90m\]'
BOLD_LIGHT_RED='\[\033[1;91m\]'
BOLD_LIGHT_GREEN='\[\033[1;92m\]'
BOLD_LIGHT_YELLOW='\[\033[1;93m\]'
BOLD_LIGHT_BLUE='\[\033[1;94m\]'
BOLD_LIGHT_PURPLE='\[\033[1;95m\]'
BOLD_LIGHT_CYAN='\[\033[1;96m\]'
BOLD_WHITE='\[\033[1;97m\]'

#DIM
DIM_BLACK='\[\033[2;30m\]'
DIM_RED='\[\033[2;31m\]'
DIM_YELLOW='\[\033[2;33m\]'
DIM_GREEN='\[\033[2;32m\]'
DIM_BROWN='\[\033[2;33m\]'
DIM_BLUE='\[\033[2;34m\]'
DIM_PURPLE='\[\033[2;35m\]'
DIM_CYAN='\[\033[2;36m\]'
DIM_LIGHT_GRAY='\[\033[2;37m\]'
DIM_DARK_GRAY='\[\033[2;90m\]'
DIM_LIGHT_RED='\[\033[2;91m\]'
DIM_LIGHT_GREEN='\[\033[2;92m\]'
DIM_LIGHT_YELLOW='\[\033[2;93m\]'
DIM_LIGHT_BLUE='\[\033[2;94m\]'
DIM_LIGHT_PURPLE='\[\033[2;95m\]'
DIM_LIGHT_CYAN='\[\033[2;96m\]'
DIM_WHITE='\[\033[2;97m\]'

#ITALIC
ITALIC_BLACK='\[\033[3;30m\]'
ITALIC_RED='\[\033[3;31m\]'
ITALIC_YELLOW='\[\033[3;33m\]'
ITALIC_GREEN='\[\033[3;32m\]'
ITALIC_BROWN='\[\033[3;33m\]'
ITALIC_BLUE='\[\033[3;34m\]'
ITALIC_PURPLE='\[\033[3;35m\]'
ITALIC_CYAN='\[\033[3;36m\]'
ITALIC_LIGHT_GRAY='\[\033[3;37m\]'
ITALIC_DARK_GRAY='\[\033[3;90m\]'
ITALIC_LIGHT_RED='\[\033[3;91m\]'
ITALIC_LIGHT_GREEN='\[\033[3;92m\]'
ITALIC_LIGHT_YELLOW='\[\033[3;93m\]'
ITALIC_LIGHT_BLUE='\[\033[3;94m\]'
ITALIC_LIGHT_PURPLE='\[\033[3;95m\]'
ITALIC_LIGHT_CYAN='\[\033[3;96m\]'
ITALIC_WHITE='\[\033[3;97m\]'

#UNDERLINE
UNDERLINE_BLACK='\[\033[4;30m\]'
UNDERLINE_RED='\[\033[4;31m\]'
UNDERLINE_YELLOW='\[\033[04;33m\]'
UNDERLINE_GREEN='\[\033[04;32m\]'
UNDERLINE_BROWN='\[\033[04;33m\]'
UNDERLINE_BLUE='\[\033[04;34m\]'
UNDERLINE_PURPLE='\[\033[04;35m\]'
UNDERLINE_CYAN='\[\033[04;36m\]'
UNDERLINE_LIGHT_GRAY='\[\033[04;37m\]'
UNDERLINE_DARK_GRAY='\[\033[04;90m\]'
UNDERLINE_LIGHT_RED='\[\033[04;91m\]'
UNDERLINE_LIGHT_GREEN='\[\033[04;92m\]'
UNDERLINE_LIGHT_YELLOW='\[\033[4;93m\]'
UNDERLINE_LIGHT_BLUE='\[\033[4;94m\]'
UNDERLINE_LIGHT_PURPLE='\[\033[4;95m\]'
UNDERLINE_LIGHT_CYAN='\[\033[4;96m\]'
UNDERLINE_WHITE='\[\033[4;97m\]'

#BLINK
BLINK_BLACK='\[\033[05;30m\]'
BLINK_RED='\[\033[05;31m\]'
BLINK_YELLOW='\[\033[05;33m\]'
BLINK_GREEN='\[\033[05;32m\]'
BLINK_BROWN='\[\033[05;33m\]'
BLINK_BLUE='\[\033[05;34m\]'
BLINK_PURPLE='\[\033[05;35m\]'
BLINK_CYAN='\[\033[05;36m\]'
BLINK_LIGHT_GRAY='\[\033[05;37m\]'
BLINK_DARK_GRAY='\[\033[05;90m\]'
BLINK_LIGHT_RED='\[\033[05;91m\]'
BLINK_LIGHT_GREEN='\[\033[05;92m\]'
BLINK_LIGHT_YELLOW='\[\033[05;93m\]'
BLINK_LIGHT_BLUE='\[\033[05;94m\]'
BLINK_LIGHT_PURPLE='\[\033[05;95m\]'
BLINK_LIGHT_CYAN='\[\033[05;96m\]'
BLINK_WHITE='\[\033[05;97m\]'

#RESET COLOR
RESET='\[\033[00m\]'

#DIM_LIGHT_GRAY='\[ \033[02;37m \]'
#DARK_NORMAL_GRAY='\[\033[0;90m\]'
#DARK_BOLD_GRAY='\[\033[1;90m\]'
#DARK_UNDERLINED_GRAY='\[\033[4;90m\]'
#DARK_UNDERLINED_GRAY='\[\033[4;90m\]'

TERMINAL_START_TIME=$(date +%s)

export PATH=$PATH:/c/Python311

#Custom Aliases and Functionalities
#alias Cpipi='cd ~/Onedrive/Desktop/DS/C++'
go2cpipi(){
	if [[ "$1" == "-l" ]]; then 
		cd ~/Onedrive/Desktop/DS/C++
		ls
	else
		cd ~/Onedrive/Desktop/DS/C++
	fi
}

count(){
	local type=$1
	local option=$2
	local count=0
	echo ""
	if [[ $type == "--help" ]]; then
		cat ~/CountFilesHelp.txt
		return
	else
		for file in *"$type"; do
			((count+=1))
			if [[ $option == "ls" && $file != "*$type" ]]; then
				echo "$count) $file"
			fi

			if [[ $file == "*$type" ]]; then
				if [[ $type == "/" ]]; then
					echo "🐧: 0 folders found in $PWD"
				else
					echo "🐧: 0 $type files found in $PWD"
				fi

				return
			fi
		done	
		echo ""
	fi

	if [[ -z $type ]]; then
		echo "🐧: Total $count files and Folders found here at $PWD"
	else
		if [[ $type == "/" ]]; then
			echo "🐧: $count folders found in $PWD"
		else
			echo "🐧: $count $type files found in $PWD"
		fi
		#echo "Total $count $1 files found in ${LIGHT_YELLOW}$PWD${RESET}"
	fi
		
	if [[ $option == "ls" ]]; then
		echo ""
		echo $(basename $PWD) ":"
		echo ""
		ls *$type
	fi
}


#Experiments


#ZORO's ASCII ART

echo ""


#GREET
current_hour=$(date +%H | sed 's/^0//' )
echo ""
if (( current_hour >= 06 && current_hour < 12 )); then
	jp2a --colors --chars='...,;:clodxkO0KXNWM' --size=30x18  "C:\Program Files\jp2a\linux-tux.jpg"
	echo ""
	printf "Good Morning!"
    #echo "In Morning,"
    #echo "The battleground awaits, and so do we."
    #echo "Let's paint the dawn red with the blood of our enemies! 🪰 "
elif (( current_hour >= 12 && current_hour < 16 )); then
	jp2a --colors --chars='...,;:clodxkO0KXNWM' --size=30x18 "C:\Program Files\jp2a\linux-tux.jpg"
	echo ""
	echo "Good Afternoon!"
    #echo "Afternoon,"
    #echo "The sun may be high, but so are our spirits."
    #echo "Let's crush our enemies with unrelenting force! 🔥"
elif (( current_hour >= 16 && current_hour < 20 )); then
	jp2a --colors --chars='...,;:clodxkO0KXNWM' --size=30x18  "C:\Program Files\jp2a\linux-tux.jpg"
	echo ""
	echo "Good Evening!"
#	echo "Evening falls,"
#	echo "and with it, the promise of battle."
#	echo "Let's embrace the darkness and unleash our wrath upon our enemies! ⚔️ "
elif ((current_hour >= 20 && current_hour < 24 )); then
	jp2a --colors --chars='...,;:clodxkO0KXNWM' --size=30x18  "C:\Program Files\jp2a\linux-tux.jpg"
	echo ""
	echo "Hope it's going to be a tireless night session!"
#    echo "Night's upon us, "
#   echo "but we are the hunters, not the hunted."
#    echo "Let's unleash our wrath and dominate the battlefield! 💻  "

else	
	jp2a --colors --chars='...,;:clodxkO0KXNWM' --size=30x18  "C:\Program Files\jp2a\linux-tux.jpg"
	echo ""
	echo "Burning the MidNight fuel, huh?"
#	echo "In the dead of night, our resolve burns brightest,"
#	echo "Let's unleash hell... 📛"
fi




#Add a conditional statement for identifying the entered command and if its a "ls" command, then show the total files loaded in the $PS1

#echo " >>>>>>>>>"$PWD"<======>" $(date + "%H:%M")
echo -ne "\033]0;Bash 🐚 \007"
CURRENT_TIME=0
TTSOTT_HOURS=0
TTSOTT_MINUTES=0
TTSOTT_SECONDS=0
MSG=" "
update_ps1(){

	CURRENT_TIME=$(date +%s)
	TOTAL_TIME_SPENT_ON_THIS_TERMINAL=$((CURRENT_TIME - TERMINAL_START_TIME))
	TTSOTT_HOURS=$((TOTAL_TIME_SPENT_ON_THIS_TERMINAL / 3600))
	TTSOTT_MINUTES=$((TOTAL_TIME_SPENT_ON_THIS_TERMINAL % 3600 / 60 ))
	TTSOTT_SECONDS=$((TOTAL_TIME_SPENT_ON_THIS_TERMINAL % 60 ))
	last_line=$(tail -n 1 ~/time_spent.txt)
	value=$(echo "$last_line" | awk -F '=' '$1 == "max" {print $2}')
	time_spent=$TOTAL_TIME_SPENT_ON_THIS_TERMINAL;
	if [[ $time_spent -gt $value ]]; then
		echo " " >> ~/time_spent.txt
		echo "---------------------------A new Record---------------------------------" >> ~/time_spent.txt
		echo "📅 $(date)" >> ~/time_spent.txt
		echo "⌚ ${TTSOTT_HOURS}hr:${TTSOTT_MINUTES}min:${TTSOTT_SECONDS}s" >> ~/time_spent.txt
		echo "max=$time_spent" >> ~/time_spent.txt
#		echo "🟢 |||||| $value < $time_spent"
		MSG="${DIM_LIGHT_GRAY}🔥 All Time High!${RESET}"
	else
#		echo "🔴 !!!!!! $value > $time_spent"
		remaining=$(($value-$time_spent))
		rem_hr=$(($remaining / 3600 ))
		rem_min=$(($remaining % 3600 / 60 ))
		rem_sec=$(($remaining % 60))

		if [[ $rem_hr -gt 0 ]]; then
			MSG="${DIM_LIGHT_GRAY}${rem_hr}hr left ${RESET}"
		elif [[ $rem_min -gt 0 ]]; then
			MSG="${DIM_LIGHT_GRAY}${rem_min}min left ${RESET}"
		else 
			MSG="${DIM_LIGHT_GRAY}${rem_sec}s left ${RESET}"
		fi
		
	 fi

	if [[ "$PWD" == "$HOME" ]]; then
		export PS1="🐧:${LIGHT_BLUE} \u ${RESET}at${LIGHT_YELLOW} 🏠 ${RESET}                  ${DIM_LIGHT_GRAY} (⌚ $TTSOTT_HOURS:$TTSOTT_MINUTES:$TTSOTT_SECONDS)${RESET} ${MSG}${RESET}\n💲 "
		#export PS1="#\# -\e[1;36m \u \e[0m\e[2;37mat\e[0m\e[1;36m 🏠 \e[0m - - -- - - -\e[2;37m \t \n >\e[0m "
    	else
		export PS1="🐧:${LIGHT_BLUE} \u ${RESET}at${LIGHT_YELLOW} [\w] ${RESET}                 ${DIM_LIGHT_GRAY} (⌚ $TTSOTT_HOURS:$TTSOTT_MINUTES:$TTSOTT_SECONDS)${RESET} ${MSG}${RESET} \n💲 "
		#export PS1="\n${YELLOW}[\w]${RESET}\n${DARK_GRAY}\$ "
        	#export PS1="#\# -\e[1;36m \u \e[0m\e[2;37mat\e[0m\e[1;36m \w \e[0m - - - - - - -\e[2;37m \t \n >\e[0m "

    	fi

	echo ""
}
hightime(){
	local ll=$(tail -n 4 ~/time_spent.txt)
	third=$(awk '{ lines[NR] = $0 } END { print lines[NR-2] }' ~/time_spent.txt)
	second=$(awk '{ lines[NR] = $0 } END { print lines[NR-1] }' ~/time_spent.txt)
	echo "Your longest time on bash shell was,"
	echo "on $third ,"
	echo "for $second !"
}

update_ps1
  PROMPT_COMMAND="update_ps1"
